<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IT Solutions - Dashboard (Fixed)</title>
  <style>
    :root{
      --sidebar:#0b1e46;
      --accent:#4da3ff;
      --card:#ffffff;
      --bg:#f4f7ff;
      --muted:#6b7280;
      --radius:12px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:#0b1e46;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Layout */
    .dashboard{display:flex;min-height:100vh}
    .sidebar{
      width:260px;background:var(--sidebar);color:#fff;padding:28px 18px;position:fixed;left:0;top:0;bottom:0;
      display:flex;flex-direction:column;gap:22px;
    }
    .logo{font-weight:700;font-size:20px;letter-spacing:0.2px}
    .logo span{color:var(--accent);font-weight:800}
    .menu{list-style:none;padding:0;display:flex;flex-direction:column;gap:8px;margin-top:6px}
    .menu button{
      text-align:left;border:0;background:transparent;padding:12px;border-radius:10px;color:#dbeafe;cursor:pointer;
      display:flex;gap:12px;align-items:center;font-size:15px;transition:background .18s, transform .12s;
    }
    .menu button:hover{background:rgba(255,255,255,0.04);transform:translateY(-2px)}
    .menu button.active{background:var(--accent);color:#04203b}

    /* Main */
    .main{margin-left:260px;padding:20px;width:calc(100% - 260px)}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:20px}
    .search{
      display:flex;align-items:center;background:var(--card);padding:10px 12px;border-radius:10px;box-shadow:0 6px 18px rgba(11,30,70,0.06);
      gap:10px;width:100%;max-width:520px;
    }
    .search input{border:0;outline:0;font-size:14px;background:transparent;width:100%}

    .profile{display:flex;align-items:center;gap:12px}
    .avatar{
      width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#2563eb);color:white;font-weight:700;
      box-shadow:0 6px 18px rgba(11,30,70,0.12)
    }

    /* Stats */
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:6px}
    .card{
      background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:0 8px 24px rgba(11,30,70,0.06);
      display:flex;flex-direction:column;gap:8px;min-height:92px;justify-content:center;
    }
    .card .label{font-size:13px;color:var(--muted)}
    .card .value{font-size:26px;font-weight:700;color:#071232}

    /* Charts */
    .panels{display:grid;grid-template-columns:2fr 1fr;gap:18px;margin-top:18px}
    .panel{background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:0 8px 24px rgba(11,30,70,0.06)}
    .panel h3{margin-bottom:12px;font-size:16px}
    canvas{width:100%;height:260px;display:block}

    /* Small utilities */
    .list{display:flex;gap:12px;flex-wrap:wrap}
    .chip{background:#eef2ff;padding:8px 10px;border-radius:999px;font-size:13px;color:#0b1e46}

    /* Responsive */
    @media(max-width:1000px){
      .stats{grid-template-columns:repeat(2,1fr)}
      .panels{grid-template-columns:1fr}
      .sidebar{width:220px}
      .main{margin-left:220px;width:calc(100% - 220px)}
    }
    @media(max-width:640px){
      .sidebar{position:relative;width:100%;height:auto;flex-direction:row;align-items:center;padding:12px}
      .main{margin-left:0;width:100%;padding:12px}
      .topbar{flex-direction:column;align-items:stretch}
      .stats{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <aside class="sidebar" aria-label="Sidebar">
      <div>
        <div class="logo">IT <span>Solutions</span></div>
        <div style="font-size:13px;color:rgba(255,255,255,0.75);margin-top:6px">Admin Dashboard</div>
      </div>

      <nav style="margin-top:14px">
       <ul class="menu" role="menu">
  <li><button onclick="gotoPage('404.html')" class="active">Dashboard</button></li>
  <li><button onclick="gotoPage('404.html')">Services</button></li>
  <li><button onclick="gotoPage('404.html')">Clients</button></li>
  <li><button onclick="gotoPage('404.html')">Tickets</button></li>
  <li><button onclick="gotoPage('404.html')">Messages</button></li>
  <li><button onclick="gotoPage('404.html')">Settings</button></li>
</ul>

      </nav>

      <div style="margin-top:auto;color:rgba(255,255,255,0.72);font-size:13px">v1.0 • © IT Solutions</div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="search" role="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round"/></svg>
          <input id="q" type="search" placeholder="Search anything..." aria-label="Search">
        </div>

        <div class="profile">
          <div style="text-align:right">
            <div style="font-size:13px;font-weight:600">Admin</div>
            <div style="font-size:12px;color:var(--muted)">it@company.com</div>
          </div>
          <div class="avatar" aria-hidden>IT</div>
        </div>
      </header>

      <!-- Stats -->
      <section class="stats" aria-label="Key stats">
        <div class="card">
          <div class="label">Active Clients</div>
          <div id="countClients" class="value">0</div>
        </div>

        <div class="card">
          <div class="label">Tickets Solved</div>
          <div id="countTickets" class="value">0</div>
        </div>

        <div class="card">
          <div class="label">New Messages</div>
          <div id="countMessages" class="value">0</div>
        </div>

        <div class="card">
          <div class="label">Server Uptime</div>
          <div id="countUptime" class="value">0%</div>
        </div>
      </section>

      <!-- Panels -->
      <section class="panels">
        <section class="panel" aria-labelledby="perfTitle">
          <h3 id="perfTitle">System Performance</h3>
          <canvas id="perfChart" width="800" height="320" aria-label="Performance chart"></canvas>
        </section>

        <aside class="panel" aria-labelledby="overviewTitle">
          <h3 id="overviewTitle">Overview</h3>
          <div style="display:flex;flex-direction:column;gap:12px">
            <div class="list">
              <div class="chip">CPU: 68%</div>
              <div class="chip">Memory: 73%</div>
              <div class="chip">Disk: 54%</div>
            </div>

            <canvas id="donut" width="400" height="260" aria-label="Client distribution"></canvas>

            <div style="font-size:13px;color:var(--muted)">Recent alerts</div>
            <ul style="list-style:none;padding-left:0;margin-top:8px">
              <li style="padding:10px;border-radius:8px;background:#fff7ed;margin-bottom:8px">Ticket #238: High latency on APAC server</li>
              <li style="padding:10px;border-radius:8px;background:#eef2ff">New client onboarded: Acme Corp</li>
            </ul>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <script>
    // Wait for DOM
    document.addEventListener('DOMContentLoaded', () => {

      // Sidebar button interaction (toggle active)
      document.querySelectorAll('.menu button').forEach(btn=>{
        btn.addEventListener('click', ()=> {
          document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          // you can add tab-switch logic here if needed
        });
      });

      // ---------- Safe counter animation ----------
      function animateValueSafe(el, start, end, durationMs=1200) {
        const node = (typeof el === 'string') ? document.getElementById(el) : el;
        if(!node) return;
        const startTime = performance.now();
        const range = end - start;
        if(range === 0){
          // immediate set (handles zero-range)
          node.textContent = (typeof end === 'number') ? String(end) : end;
          return;
        }
        function step(now){
          const t = Math.min(1, (now - startTime)/durationMs);
          const eased = t<.5 ? 2*t*t : -1 + (4 - 2*t)*t; // simple ease
          const current = Math.round(start + range * eased);
          node.textContent = (node === document.getElementById('countUptime')) ? current + '%' : current;
          if(t < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }

      // Start counters
      animateValueSafe('countClients', 0, 126, 1300);
      animateValueSafe('countTickets', 0, 348, 1400);
      animateValueSafe('countMessages', 0, 27, 1000);
      animateValueSafe('countUptime', 99, 99, 800); // zero-range handled -> shows "99%"

      // ---------- Canvas drawing helpers (handles DPR) ----------
      function prepareCanvas(canvas){
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.round(rect.width * dpr);
        canvas.height = Math.round(rect.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0); // use CSS px coordinates afterwards
        return ctx;
      }

      // ---------- Simple performance bar animation ----------
      (function perfChart(){
        const canvas = document.getElementById('perfChart');
        const ctx = prepareCanvas(canvas);
        const W = canvas.getBoundingClientRect().width;
        const H = canvas.getBoundingClientRect().height;

        // sample random-ish series for demo (stable across runs)
        const data = Array.from({length:12}, (_,i)=> Math.round(40 + 40 * Math.abs(Math.sin((i+1)/3)) + (i%2?10:0)));
        let phase = 0;

        function draw(){
          // clear
          ctx.clearRect(0,0,W,H);
          // background grid
          ctx.fillStyle = '#fff';
          ctx.fillRect(0,0,W,H);
          ctx.globalAlpha = 0.06;
          for(let g=0;g<5;g++){
            ctx.fillStyle = '#0b1e46';
            ctx.fillRect(0, H*(g/5), W, 1);
          }
          ctx.globalAlpha = 1;

          // line path
          ctx.beginPath();
          const pad = 18;
          const usableW = W - pad*2;
          const usableH = H - pad*2;
          const max = 100;
          data.forEach((v,i)=>{
            const x = pad + (usableW/(data.length-1))*i;
            const y = pad + usableH*(1 - (v/max));
            if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
          });
          // stroke path
          ctx.lineWidth = 2.5;
          ctx.strokeStyle = '#4da3ff';
          ctx.stroke();

          // fill under curve (gradient)
          ctx.lineTo(pad + usableW, H - pad);
          ctx.lineTo(pad, H - pad);
          ctx.closePath();
          const g = ctx.createLinearGradient(0,pad,0,H);
          g.addColorStop(0, 'rgba(77,163,255,0.28)');
          g.addColorStop(1, 'rgba(77,163,255,0.02)');
          ctx.fillStyle = g;
          ctx.fill();

          // draw circles
          data.forEach((v,i)=>{
            const x = pad + (usableW/(data.length-1))*i;
            const y = pad + usableH*(1 - (v/max));
            ctx.beginPath();
            ctx.arc(x,y,4,0,Math.PI*2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#2563eb';
            ctx.stroke();
          });

          // small animation modifier to simulate live changes
          phase += 0.012;
          for(let i=0;i<data.length;i++){
            // mutate slightly
            data[i] = Math.max(18, Math.min(98, Math.round(data[i] + Math.sin(phase + i/3)*0.6)));
          }

          requestAnimationFrame(draw);
        }

        draw();
      })();

      // ---------- Donut chart ----------
      (function donut(){
        const canvas = document.getElementById('donut');
        const ctx = prepareCanvas(canvas);
        const W = canvas.getBoundingClientRect().width;
        const H = canvas.getBoundingClientRect().height;
        const cx = W/2;
        const cy = H/2 - 10;
        const radius = Math.min(W,H)/4;

        const segments = [
          {label:'Enterprise', value:46, color:'#2563eb'},
          {label:'SMB', value:32, color:'#4da3ff'},
          {label:'Startup', value:22, color:'#a78bfa'}
        ];
        const total = segments.reduce((s,x)=>s+x.value,0);

        // animation param
        let t = 0;
        function draw(){
          ctx.clearRect(0,0,W,H);
          let start = -Math.PI/2;
          segments.forEach(seg=>{
            const angle = (seg.value/total) * Math.PI*2 * Math.min(1, t);
            ctx.beginPath();
            ctx.moveTo(cx,cy);
            ctx.arc(cx,cy,radius,start,start+angle);
            ctx.closePath();
            ctx.fillStyle = seg.color;
            ctx.fill();
            start += angle;
          });

          // inner cutout
          ctx.beginPath();
          ctx.fillStyle = '#fff';
          ctx.arc(cx,cy,radius*0.56,0,Math.PI*2);
          ctx.fill();

          // center text
          ctx.fillStyle = '#0b1e46';
          ctx.font = '700 18px Inter, system-ui';
          ctx.textAlign = 'center';
          ctx.fillText('Clients', cx, cy+6);

          // legend (simple)
          let lx = 12, ly = H - 62;
          ctx.font = '13px Inter, system-ui';
          segments.forEach(seg=>{
            ctx.fillStyle = seg.color;
            ctx.fillRect(lx, ly, 12, 12);
            ctx.fillStyle = '#0b1e46';
            ctx.fillText(`${seg.label} — ${seg.value}%`, lx+22, ly+10);
            ly += 20;
          });

          if(t < 1) t += 0.03;
          requestAnimationFrame(draw);
        }
        draw();
      })();

    }); // DOMContentLoaded





function gotoPage(page) {
  window.location.href = page;
}

  </script>
</body>
</html>
